/*! flask-ppm-tool 06-07-2015 */
!function(){angular.module("PPT",["app.attributes","app.browse","app.comment","app.curate","app.filter","app.header","app.login","app.loginInjectorProvider","app.manage","app.modalConfirm","app.project","app.select","app.stateLocation","app.title"])}(),function(){"use strict";function a(a){a.otherwise("/select")}angular.module("PPT").config(a),a.$inject=["$urlRouterProvider"]}(),function(){"use strict";function a(a,b){}angular.module("PPT").controller("PPTCtrl",a),a.$inject=["$rootScope","$location"]}(),function(){"use strict";function a(a,b,c,d){function e(e,f,g,h,i){if(window.onbeforeunload=function(b){a.$broadcast("savestate")},("select"==f.name.substring(0,"select".length)||"filter"==f.name)&&(b.updateAllProjects(),b.setList(b.getIDListFromAllProjects()),b.setDescription("none;")),"project"==f.name.substring(0,"project".length)&&!b.hasProjects()){b.updateAllProjects();var j,k=b.getMasterList(),l=k.selectedIds;k.projectID;g.projectID?(j=parseInt(g.projectID),l=[j],b.setList(l),b.setDescription("projectID = "+j+";")):(j=d.getStateFromLocation().stateParams.projectID,j||b.hasProjects()&&(j=k.index>-1?l[k.index]:l[0])),b.updateProjectListProjectID(j,l),c.projectID&&c.projectID==j||(c.projectID=j,c.getProjectData(g))}}a.$on("$stateChangeStart",e)}angular.module("PPT").run(a),a.$inject=["$rootScope","projectListService","projectDataService","stateLocationService"]}(),function(){angular.module("app.attributes",["ui.router"])}(),function(){"use strict";function a(a,b,c){this.als=c,this.attributes=this.als.getAttributes}angular.module("app.attributes").controller("Attributes",a),a.$inject=["$scope","$state","attributesService"]}(),function(){"use strict";function a(a,b,c){function d(a){if("multipleSelect"==a.format||"dateRangeSelect"==a.format)_.isArray(a.value)?this[a.name]=_.map(a.value,function(a){return a.id}):this[a.name]=a.value.id,a.child&&(_.isArray(a.child.value)?this[a.child.name]=a.child.value:this[a.child.name]=a.child.value.id);else if("date"==a.format||_.contains(["commentAuthored","commentEdited"],a.name)){if(a.computed)return;a.value?this[a.name]=new Date(a.value).toString("yyyy-MM-ddTHH:mm:ss"):this[a.name]=null}else"child_for_"!=a.format.substring(0,"child_for_".length)&&(this[a.name]=a.value)}function e(a){_.contains(["disposition","comment"],a.table)||d(a)}function f(){_.each(z.allAttributes,function(a){delete a.errors})}function g(a){return z.allAttributes[a]}function h(){return z.allAttributes}function i(b,c){var e=new Object;return e.csrf_token=z.csrf_token,"undefined"!=typeof c&&_.each(c,function(a){"undefined"!=typeof a.value.id?e[a.name]=a.value.id:e[a.name]=a.value}),_.each(z.getProjectAttributes(b),d,e),"comment"==b&&(e.commentEditor=a.currentUser.id),e}function j(a,b){try{return _.sortBy(z.projectAttributes[a],"attributeID")}catch(c){}}function k(a){try{return z.rawAttributes[a]}catch(b){}}function l(a){return a.multi?_.filter(a.choices,function(b){return _.contains(a.value,b.id)}):"lines"==a.format?_.filter(a.choices,function(b){return _.contains(a.value,b)}):_.where(a.choices,{id:a.value})[0]}function m(a){return"undefined"!=typeof a.value&&null!=a.value&&""!=a.value&&a.value!=[]||"undefined"!=typeof a.value&&null!=a.value&&"undefined"!=typeof a.value.id&&null!=a.value.id&&""!=a.value&&a.value!=[]?!0:!1}function n(){return z.csrf_token}function o(a){return"project link here"}function p(a){if("$$hashKey"!=a.name){var b=z.allAttributes[a.name];b.value=a.value,a.printValue&&(b.printValue=a.printValue),"child_for_"!=b.format.substring(0,"child_for_".length)&&("date"==b.format&&a.value&&(b.value=new Date(Date.parse(a.value))),z.projectAttributes[this].push(b))}}function q(){_.each(["description","portfolio","project"],function(a){z.projectAttributes[a]=[],u(a,[])})}function r(){var a=angular.fromJson(sessionStorage.attributesService);a&&(z.allAttributes=a.allAttributes,z.currentState=a.currentState)}function s(){var a=new Object;a.allAttributes=z.allAttributes,a.currentState=z.currentState,sessionStorage.attributesService=angular.toJson(a)}function t(a){z.allAttributes=a.data;var b=_.filter(a.data,function(a){return a.child?!0:void 0});_.each(b,function(a){var b=a.child;z.allAttributes[b.name]=b})}function u(a,b){z.currentState.keys=[];var c=k(a),d=c;"undefined"==typeof d&&(d=[]);var e;if(_.each(b,function(a){d=_.filter(d,function(b){return"undefined"==typeof b[a.name].id&&b[a.name]==a.id||b[a.name].id==a.id?(z.currentState.keys.push(a),!0):void 0})}),d.length){e=d[0];var f=[];_.each(Object.keys(e),function(a){"printValue"!=_.last(a.split("."))&&f.push({name:a,value:e[a]})}),z.projectAttributes[a]=[],_.each(f,p,a);var g=_.filter(z.projectAttributes[a],function(a){return"child"in a?!0:void 0});return _.each(g,function(a){var b=a.child.name;a.child=z.allAttributes[b]}),e}var h=_.where(z.allAttributes,{table:a});z.projectAttributes[a]=[],_.each(h,function(b){b.computed||(_.contains(["multipleSelect","dateRangeSelect"],b.format)?b.value=[]:b.value="",z.projectAttributes[a].push(b))})}function v(){b.get("/getAllAttributes").then(z.setAllAttributes)}function w(a){"undefined"!=typeof a&&_.each(a,function(a){_.each(Object.keys(a),function(a){var b=z.getAttribute(a);b.server_errors=this[a]},a)})}function x(a,b){z.currentState=new Object,z.currentState.keys=[],z.currentState.projectID=a.data.projectID,z.csrf_token=a.data.csrf_token,z.errors=a.data.errors,z.clearAllErrors(),delete z.success,z.updateErrors(a.data.errors),"OK"==a.statusText&&_.each(a.data.formData,y),"disposedInFY"in b||"disposedInQ"in b?u("disposition",[{name:"disposedInFY",id:z.allAttributes.disposedInFY.value.id},{name:"disposedInQ",id:z.allAttributes.disposedInQ.value.id}]):"commentID"in b&&u("comment",[{name:"commentID",id:z.allAttributes.commentID.value}])}function y(a){var b=new Object;b.tableName=a.tableName,_.isArray(a.attributes[0].attributes)?("undefined"==typeof z.rawAttributes&&(z.rawAttributes=new Object),z.rawAttributes[b.tableName]=[],_.each(a.attributes,function(a){if(a.attributes.length){var c=new Object;_.each(a.attributes,function(a){c[a.name]=a.value,"undefined"!=typeof a.printValue&&(c[a.name+".printValue"]=a.printValue)}),z.rawAttributes[b.tableName].push(c)}})):("undefined"==typeof z.projectAttributes&&(z.projectAttributes=new Object),z.projectAttributes[b.tableName]=[],_.each(a.attributes,p,b.tableName))}var z={addAttrToDataObj:d,addUniqueAttrToDataObj:e,clearAllErrors:f,getAttribute:g,getAllAttributes:h,getFormData:i,getProjectAttributes:j,getRawAttributes:k,getSelectedChoices:l,getToken:n,hasAValue:m,makeProjectLink:o,mergeAttributeWithValue:p,newProjectAttributes:q,RestoreState:r,SaveState:s,setAllAttributes:t,updateProjAttrsFromRawItem:u,updateAllAttributes:v,updateErrors:w,updateProjectAttributes:x,updateProjectAttributesFromForm:y};return z.RestoreState(),"undefined"==typeof z.allAttributes&&z.updateAllAttributes(),a.$on("savestate",z.SaveState),a.$on("restorestate",z.RestoreState),z}angular.module("app.attributes").factory("attributesService",a),a.$inject=["$rootScope","$http","projectListService"]}(),function(){angular.module("app.browse",["ui.router"])}(),function(){"use strict";function a(a){a.state("browse",{name:"browse",url:"/browse",templateUrl:"/static/browse/browse.html",controller:"Browse",controllerAs:"browse",data:{requiresLogin:!1}})}angular.module("app.browse").config(a),a.$inject=["$stateProvider"]}(),function(){"use strict";function a(a,b){this.ls=b,this.masterList=this.ls.getMasterList}angular.module("app.browse").controller("Browse",a),a.$inject=["$scope","projectListService"]}(),function(){angular.module("app.comment",["ui.router"])}(),function(){"use strict";function a(a){a.state("comment",{name:"comment",url:"/comment",templateUrl:"/static/comment/comment.html",controller:"Comment",controllerAs:"comment",data:{requiresLogin:!0}})}angular.module("app.comment").config(a),a.$inject=["$stateProvider"]}(),function(){"use strict";function a(a,b){this.currentUser=b.currentUser}angular.module("app.comment").controller("Comment",a),a.$inject=["$scope","$rootScope"]}(),function(){angular.module("app.curate",["ui.router"])}(),function(){"use strict";function a(a){a.state("curate",{name:"curate",url:"/curate",templateUrl:"/static/curate/curate.html",controller:"Curate",controllerAs:"curate",data:{requiresLogin:!0}})}angular.module("app.curate").config(a),a.$inject=["$stateProvider"]}(),function(){"use strict";function a(a,b){this.currentUser=b.currentUser}angular.module("app.curate").controller("Curate",a),a.$inject=["$scope","$rootScope"]}(),function(){angular.module("app.filter",["ui.router","angular-storage","angular-jwt"])}(),function(){"use strict";function a(a){a.state("filter",{name:"filter",url:"/filter",controller:"Filter",controllerAs:"filter",templateUrl:"/static/filter/filter.html",data:{requiresLogin:!1}})}angular.module("app.filter").config(a),a.$inject=["$stateProvider"]}(),function(){"use strict";function a(a,b,c,d,e,f){this.ls=e,this.masterList=e.getMasterList,this.selectState=f}angular.module("app.filter").controller("Filter",a),a.$inject=["$scope","$http","store","jwtHelper","projectListService","selectStateService"]}(),function(){angular.module("app.header",["ui.router"])}(),function(){"use strict";function a(a,b,c,d){function e(){g.masterList().next>-1&&c.jumpToProject(g.masterList().next)}function f(){g.masterList().previous>-1&&c.jumpToProject(g.masterList().previous)}var g=this;this.currentUser=a.currentUser,this.masterList=c.getMasterList,this.loggedIn=d.loggedIn,this.login=d.login,this.logout=d.logout,this.jumpToNextProject=e,this.jumpToPreviousProject=f,a.$on("$stateChangeSuccess",function(a,b){function c(a){return b.name.split(".")[0]===a}function d(){return g.isActive("project")&&g.masterList().next>-1}function e(){return g.isActive("project")&&g.masterList().previous>-1}g.isActive=c,g.hasNext=d,g.hasPrevious=e})}angular.module("app.header").controller("Header",a),a.$inject=["$rootScope","$state","projectListService","loginStateService"]}(),function(){angular.module("app.login",["ui.bootstrap","angular-storage","angular-jwt"])}(),function(){"use strict";function a(a){function b(b,c){return a({url:"/auth",method:"POST",data:{username:b,password:c}})}var c={login:b};return c}angular.module("app.login").factory("loginApiService",a),a.$inject=["$http"]}(),function(){"use strict";function a(a,b){a.tokenGetter=function(a){return a.get("jwt")},b.interceptors.push("jwtInterceptor"),b.interceptors.push("loginInjector")}angular.module("app.login").config(a),a.$inject=["jwtInterceptorProvider","$httpProvider"]}(),function(){"use strict";function a(a,b){function c(c,d){b.login(c,d).then(function(b){a.$close(b)})}this.cancel=a.$dismiss,this.submit=c}angular.module("app.login").controller("Login",a),a.$inject=["$scope","loginApiService"]}(),function(){"use strict";function a(a,b,c,d,e){function f(a,f,g,h,i){var j=f.data&&f.data.requiresLogin,k=!c.get("jwt")||d.isTokenExpired(c.get("jwt"));j&&k&&(a.preventDefault(),e().then(function(){return b.go(f.name)},function(){return""==h.name?b.go("select"):void 0}))}b.transitionTo("select"),c.get("jwt")&&!d.isTokenExpired(c.get("jwt"))&&(a.currentUser=d.decodeToken(c.get("jwt"))),a.$on("$stateChangeStart",f)}angular.module("app.login").run(a),a.$inject=["$rootScope","$state","store","jwtHelper","loginService"]}(),function(){"use strict";function a(a,b,c,d){function e(){var b=a.open({templateUrl:"static/login/login.html",controller:"Login",controllerAs:"login"});return b.result.then(f)}function f(a){if(200==a.status){c.set("jwt",a.data.token);var e=d.decodeToken(a.data.token);return b.currentUser=e,e}return a}return e}angular.module("app.login").service("loginService",a),a.$inject=["$modal","$rootScope","store","jwtHelper"]}(),function(){"use strict";function a(a,b,c,d,e){function f(){return Boolean(c.get("jwt"))}function g(){e()}function h(){c.remove("jwt"),delete a.currentUser}function i(){sessionStorage.loginStateService=angular.toJson(k.masterList)}function j(){k.masterList=angular.fromJson(sessionStorage.loginStateService)}var k={loggedIn:f,login:g,logout:h,SaveState:i,RestoreState:j};return k}angular.module("app.login").factory("loginStateService",a),a.$inject=["$rootScope","$http","store","jwtHelper","loginService"]}(),function(){angular.module("app.loginInjectorProvider",[])}(),function(){"use strict";function a(a,b,c){function d(b){if(401!==b.status)return b;var c=a.defer();return e().then(function(){c.resolve(f(b.config))},function(){g.go("select"),c.reject(b)}),c.promise}var e,f,g,h={responseError:d};return h}angular.module("app.loginInjectorProvider").factory("loginInjector",a),a.$inject=["$q","$injector","$timeout"]}(),function(){angular.module("app.manage",["ui.router"])}(),function(){"use strict";function a(a){a.state("manage",{name:"manage",url:"/manage",templateUrl:"/static/manage/manage.html",controller:"Manage",controllerAs:"manage",data:{requiresLogin:!0}})}angular.module("app.manage").config(a),a.$inject=["$stateProvider"]}(),function(){"use strict";function a(a){this.currentUser=a.currentUser}angular.module("app.manage").controller("Manage",a),a.$inject=["$rootScope"]}(),function(){angular.module("app.modalConfirm",["ui.bootstrap"])}(),function(){"use strict";function a(a){function b(b,c){var e={},f={};return jQuery.extend(e,d.modalDefaults,b),jQuery.extend(f,d.modalOptions,c),e.controller||(e.controller=function(a,b){a.modalOptions=f,a.modalOptions.ok=function(a){b.close(a)},a.modalOptions.close=function(a){b.dismiss("cancel")}}),a.open(e).result}function c(a,b){return a||(a={}),a.backdrop="static",d.show(a,b)}var d={modalDefaults:{backdrop:!0,keyboard:!0,modalFade:!0,templateUrl:"/static/modalConfirm/confirm.html"},modalOptions:{actionText:"OK",bodyText:"OK to proceed?",closeText:"Close",headerText:"Confirm"},show:b,showModal:c};return d}angular.module("app.modalConfirm").factory("modalConfirmService",a),a.$inject=["$modal"]}(),function(){angular.module("app.project",["ui.date","ui.router"])}(),function(){"use strict";function a(a){a.state("project",{name:"project",url:"/project",controller:"Project",controllerAs:"project",templateUrl:"/static/project/project.html",data:{requiresLogin:!1,viewUrl:"/static/project/project.html"}}).state("project.add",{name:"project",url:"/add",data:{requiresLogin:!0}}).state("project.add.comment",{name:"project",url:"/comment/:projectID",controller:["$stateParams",function(a){console.log(a)}],controllerAs:"project",data:{requiresLogin:!0}}).state("project.add.disposition",{name:"project",url:"/disposition/:projectID",controller:["$stateParams",function(a){console.log(a)}],controllerAs:"project",data:{requiresLogin:!0}}).state("project.detail",{name:"project",url:"/:projectID",controller:["$stateParams",function(a){console.log(a)}],controllerAs:"project",data:{requiresLogin:!1}}).state("project.edit",{name:"project",url:"/edit",data:{requiresLogin:!0}}).state("project.edit.attach",{url:"/attach/:projectID",controller:["$stateParams",function(a){console.log(a)}],controllerAs:"project",data:{requiresLogin:!0}}).state("project.edit.comment",{url:"/comment/:projectID",controller:["$stateParams",function(a){console.log(a)}],controllerAs:"project",data:{requiresLogin:!0}}).state("project.edit.commentDetail",{url:"/commentDetail/:projectID/:commentID",controller:["$stateParams",function(a){console.log(a)}],controllerAs:"project",data:{requiresLogin:!0}}).state("project.edit.description",{name:"project",url:"/description/:projectID",controller:["$stateParams",function(a){console.log(a)}],controllerAs:"project",data:{requiresLogin:!0}}).state("project.edit.disposition",{url:"/disposition/:projectID",controller:["$stateParams",function(a){console.log(a)}],controllerAs:"project",data:{requiresLogin:!0}}).state("project.edit.dispositionDetail",{url:"/dispositionDetail/:projectID/:disposedInFY/:disposedInQ",controller:["$stateParams",function(a){console.log(a)}],controllerAs:"project",data:{requiresLogin:!0}}).state("project.edit.portfolio",{url:"/portfolio/:projectID",controller:["$stateParams",function(a){console.log(a)}],controllerAs:"project",data:{requiresLogin:!0}}).state("project.edit.project",{url:"/project/:projectID",controller:["$stateParams",function(a){console.log(a)}],controllerAs:"project",data:{requiresLogin:!0}})}angular.module("app.project").config(a),a.$inject=["$stateProvider"]}(),function(){"use strict";function a(a,b,c,d,e,f){this.as=e,this.ds=c,this.ls=d,this.attributes=e.getAttributes,this.changeMode=c.changeMode,this.currentMode=c.currentMode,this.dateOptions={changeYear:!0,changeMonth:!0},this.jumpToAtachFile=c.jumpToAtachFile,this.jumpToAddForm=c.jumpToAddForm,this.masterList=this.ls.getMasterList,this.viewUrl=c.viewUrl,a.$on(["$stateChangeStart"],function(d,e,g,h,i){if(c.success="","undefined"!=typeof c.noCheck&&(a.projectForm.$setPristine(!0),delete c.noCheck),a.projectForm.$dirty){d.preventDefault();var j={closeText:"Cancel",actionText:"Continue",headerText:"Unsaved changes",bodyText:"You have unsaved changes. Press Continue to discard your changes and navigate away, or press Cancel to stay on this page."};f.showModal({},j).then(function(d){a.projectForm.$setPristine(!0);var f=g.projectID?g.projectID:i.projectID;c.getProjectData(f,g),b.go(e,g)})}})}angular.module("app.project").controller("Project",a),a.$inject=["$scope","$state","projectDataService","projectListService","attributesService","modalConfirmService"]}(),function(){"use strict";function a(a,b,c,d,e,f,g,h){function i(){c.go("select")}function j(a){a?c.go(a,{projectID:A.projectID}):c.go("project.detail",{projectID:A.projectID})}function k(){var a=g.getFormData("description",[]);b.get("getProjectAttributes/0").then(function(c){A.setProjectData(c),delete a.projectID;var d={method:"POST",url:"/projectCreate",headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},data:jQuery.param(a,!0)};b(d).then(A.jumpToNewProject)})}function l(){return"project.detail"==c.current.name?"view":c.current.name.substring(8)}function m(){return A.attributes}function n(a){parseInt(a.projectID)>-1&&b.get("getProjectAttributes/"+a.projectID).then(function(b){A.setProjectData(b,a)})}function o(){var a=h.getStateFromLocation();"projectID"in a.stateParams&&a.stateParams.projectID!=A.projectID&&(A.projectID=a.stateParams.projectID,A.getProjectData(a.stateParams),"commentID"in a.stateParams)}function p(a,b){g.updateProjAttrsFromRawItem(a,b);c.go("project.edit."+a,{projectID:c.params.projectID})}function q(){c.go("project.attach",{projectID:A.projectID})}function r(a,b){g.updateProjAttrsFromRawItem(a,b),c.go("project.add."+a,{projectID:c.params.projectID})}function s(a){A.setProjectData(a),f.updateAllProjects(a.data.projectID),c.go("project.edit.description",{projectID:a.data.projectID})}function t(){g.newProjectAttributes(),c.go("select.addProject")}function u(){"undefined"!=sessionStorage.projectDataServiceAttributes&&(A.restoredParams=angular.fromJson(sessionStorage.projectDataServiceAttributes))}function v(a,d){var e=g.getFormData(a,d),f=(c.params.projectID?c.params.projectID:"",{method:"POST",url:"/projectEdit/"+c.params.projectID+"/"+a,headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},data:jQuery.param(e,!0)});b(f).then(A.setProjectData),A.noCheck=!0,c.go("project.edit."+a,{projectID:c.params.projectID,noCheck:!0})}function w(){sessionStorage.projectDataServiceAttributes=angular.toJson(d)}function x(a,b){g.updateProjectAttributes(a,b),A.success=a.data.success,A.SaveState(),g.SaveState()}function y(a,b){var d=g.updateProjAttrsFromRawItem(a,b);"comment"==a&&c.go("project.edit.commentDetail",{projectID:A.projectID,commentID:d.commentID}),"disposition"==a&&c.go("project.edit.dispositionDetail",{projectID:A.projectID,disposedInFY:d.disposedInFY.id,disposedInQ:d.disposedInQ.id})}function z(){return Boolean(_.contains(projectForm.classList,"ng-pristine")&&A.success)}var A={attributes:g.getAllAttributes,cancelAddProject:i,changeMode:j,createProject:k,currentMode:l,getProjectData:n,getAttributes:m,getProjectAttributes:g.getProjectAttributes,getProjectDataFromLocation:o,hideDetails:p,jumpToAtachFile:q,jumpToAddForm:r,jumpToNewProject:s,newProject:t,printValue:g.printValue,projectID:d.projectID,RestoreState:u,saveProject:v,SaveState:w,setProjectData:x,showDetails:y,showEditSuccess:z,stateParams:d,viewUrl:c.current.data?c.current.data.viewUrl:""};return A.RestoreState(),"undefined"==typeof A.attributes()&&A.restoredParams&&A.getProjectData(A.restoredParams),a.$on("savestate",A.SaveState),a.$on("restorestate",A.RestoreState),a.$on("$locationChangeSuccess",A.getProjectDataFromLocation),A.SaveState(),A}angular.module("app.project").factory("projectDataService",a),a.$inject=["$rootScope","$http","$state","$stateParams","$location","projectListService","attributesService","stateLocationService"]}(),function(){"use strict";function a(a,b,c,d,e){function f(a,b){if("undefined"==typeof b)var b=t.masterList.projectID;t.masterList.allProjects=a.data;var c=t.getIDListFromAllProjects();("undefined"==typeof b||0>b)&&(b=c[0]),s(b,c)}function g(){return _.map(t.masterList.allProjects,function(a){return a.projectID})}function h(){return t.masterList}function i(){return"undefined"==typeof t.projectID?d.projectID:t.projectID}function j(){return Boolean(t.getMasterList().allProjects.length>0)}function k(){t.masterList={allProjects:[],description:"",index:-1,next:-1,previous:-1,projectID:-1,projectName:"",selectedIds:[]}}function l(a){a=parseInt(a);t.masterList.selectedIds.indexOf(a);if(t.masterList.selectedIds.indexOf(a)>-1)return void t.jumpToProjectInList(a,t.masterList.selectedIds);var b=t.getIDListFromAllProjects();return b.indexOf(a)>-1?void t.jumpToProjectInList(a,b):void alert("Can't find a project to display.")}function m(a,b){var d=b.indexOf(a);t.masterList.index=d,t.masterList.projectID=a,d>0?t.masterList.previous=b[d-1]:t.masterList.previous=-1,d<b.length?t.masterList.next=b[d+1]:t.masterList.next=-1;var e=t.getIDListFromAllProjects();d=e.indexOf(a),t.masterList.projectName=t.masterList.allProjects[d].name,c.go("project.detail",{projectID:a})}function n(){t.masterList=angular.fromJson(sessionStorage.projectListService)}function o(){sessionStorage.projectListService=angular.toJson(t.masterList)}function p(a){t.masterList.description=a}function q(a){t.masterList.selectedIds=a;var b=a.indexOf(t.masterList.projectID);if(0>b){var c=a[0];t.updateProjectListProjectID(c,a)}}function r(a){b.post("/getBriefDescriptions").then(function(b){t.getAllProjectResults(b,a)})}function s(a,b){if(a){"undefined"==typeof b&&(b=t.masterList.selectedIds),t.masterList.projectID=a;var c=b.indexOf(a);c>-1&&(t.masterList.index=c,c>0?t.masterList.previous=b[c-1]:t.masterList.previous=-1,c<b.length?t.masterList.next=b[c+1]:t.masterList.next=-1,"undefined"==typeof t.masterList.selectedIds[0]&&(t.masterList.selectedIds=b)),_.each(t.masterList.allProjects,function(b){b.projectID==a&&(t.masterList.projectName=b.name)})}t.SaveState()}var t={getAllProjectResults:f,getIDListFromAllProjects:g,getMasterList:h,getProjectID:i,hasProjects:j,initModel:k,jumpToProject:l,jumpToProjectInList:m,RestoreState:n,SaveState:o,setDescription:p,setList:q,updateAllProjects:r,updateProjectListProjectID:s};return t.RestoreState(),"undefined"==typeof t.masterList&&t.initModel(),a.$on("savestate",t.SaveState),a.$on("restorestate",t.RestoreState),t}angular.module("app.project").factory("projectListService",a),a.$inject=["$rootScope","$http","$state","$stateParams","$location"]}(),function(){angular.module("app.select",["ui.router","readMore"])}(),function(){"use strict";function a(a){a.state("select",{name:"select",url:"/select",controller:"Select",controllerAs:"select",templateUrl:"/static/select/select.html",data:{requiresLogin:!1}}).state("select.addProject",{name:"select",url:"/addProject",controller:"Select",controllerAs:"select",data:{requiresLogin:!0}})}angular.module("app.select").config(a),a.$inject=["$stateProvider"]}(),function(){"use strict";function a(a,b,c,d,e,f){this.state=b,this.ls=c,this.masterList=this.ls.getMasterList,this.jumpToProject=this.ls.jumpToProject,this.ss=d,this.selectState=this.ss.masterList,this.ds=e,a.$on("$stateChangeStart",function(c,d,g,h,i){if(e.success="",a.addProject.$dirty){c.preventDefault();var j={closeText:"Cancel",actionText:"Continue",headerText:"Unsaved changes",bodyText:"You have unsaved changes. Press Continue to discard your changes and navigate away, or press Cancel to stay on this page."};f.showModal({},j).then(function(c){a.addProject.$setPristine(),b.go(d,g)})}})}angular.module("app.select").controller("Select",a),a.$inject=["$scope","$state","projectListService","selectStateService","projectDataService","modalConfirmService"]}(),function(){"use strict";function a(){return function(a,b,c,d){if(!b)return a;var e=(a.length||0,(b||"").toLowerCase()),f=e.split(" "),g=(f.length,a);if("0"==d&&(g=_.filter(g,function(a){return"0"==a.finalID})),"phrase"==c)g=_.filter(g,function(a){return(a.name+" "+a.description).toLowerCase().match(e)});else if("and"==c)_.map(f,function(a){g=_.filter(g,function(a){return(a.name+" "+a.description).toLowerCase().match(this)},a)});else if("or"==c){var h,i=[];_.map(f,function(a){h=_.filter(g,function(a){return(a.name+" "+a.description).toLowerCase().match(this)},a),i=_.union(h,i)}),g=_.intersection(g,i)}return g}}angular.module("app.select").filter("nameSearch",a)}(),function(){"use strict";function a(a,b,c,d){function e(){q.masterList.breakdownAttr=""}function f(){q.masterList.searchText=""}function g(){return q.breakdownByAttribute}function h(){return q.breakdownChoicesList}function i(){var a=0;return _.each(q.breakdownByAttribute,function(b){a+=b.projectList.length}),a}function j(a){d.setList(a.projectList),d.setDescription(a.query_desc),c.go("browse")}function k(a){q.breakdownByAttribute=a.data}function l(a){q.breakdownChoicesList=a.data}function m(){b.get("getBreakdownByAttribute/"+q.masterList.breakdownAttr.id).then(k)}function n(){b.get("getBreakdownChoices").then(l)}function o(){sessionStorage.selectStateService=angular.toJson(q.masterList)}function p(){"undefined"!=sessionStorage.selectStateService&&(q.masterList=angular.fromJson(sessionStorage.selectStateService))}var q={masterList:{searchText:"",nameLogic:"or",finalID:"0",breakdownAttr:""},clearBreakdown:e,clearSearchText:f,getBreakdownByAttribute:g,getBreakdownChoices:h,getBreakdownTotal:i,jumpToBreakdownTable:j,setBreakdownChoices:l,updateBreakdownByAttribute:m,updateBreakdownChoices:n,SaveState:o,RestoreState:p};return p(),"undefined"==typeof q.breakdownChoicesList&&q.updateBreakdownChoices(),a.$on("savestate, service.SaveState"),a.$on("restorestate, service.RestoreState"),o(),q}angular.module("app.select").factory("selectStateService",a),a.$inject=["$rootScope","$http","$state","projectListService"]}(),function(){angular.module("app.stateLocation",["ui.router"])}(),function(){"use strict";function a(){function a(a,b){var c=void 0===b?null:JSON.stringify(b);return sessionStorage.setItem(a,c)}function b(a){return JSON.parse(sessionStorage.getItem(a))}function c(){var a=[];for(key in sessionStorage)a.push(f.setStorage(key,null));return a}function d(a){return null==a&&(a=null),f.accessor("stateHistory",a)}function e(a,b){return null==b?f.getStorage(a):f.setStorage(a,b)}var f={setStorage:a,getStorage:b,clear:c,stateHistory:d,accessor:e};return f}angular.module("app.stateLocation").factory("sessionService",a)}(),function(){"use strict";function a(a){function b(b,c){var d=a.stateHistory(),e=null!=d?d:{};return e[b]=c,a.stateHistory(e)}function c(b){var c=a.stateHistory();return null!=c?c[b]:void 0}var d={set:b,get:c};return d}angular.module("app.stateLocation").factory("stateHistoryService",a),a.$inject=["sessionService"]}(),function(){"use strict";function a(a,b,c){a.$on("$stateChangeSuccess",function(a,b,d){c.stateChange()}),a.$on("$locationChangeSuccess",function(){c.locationChange()})}angular.module("app.stateLocation").run(a),a.$inject=["$rootScope","$state","stateLocationService"]}(),function(){"use strict";function a(a,b,c,d,e,f){function g(){return angular.fromJson(sessionStorage.currentState)}function h(a){if(null==p.preventCall.pop("locationChange")){var d=b.url();if("/project/"==d.substring(0,9)){var g;if("edit/commentDetail"==d.substring(9,27)){var h=d.substring(28).split("/");g=parseInt(h[0]);parseInt(_.first(_.last(h).split("#")))}else if("edit/dispositionDetail"==d.substring(9,31)){var h=d.substring(32).split("/");g=parseInt(h[0]);parseInt(h[1]),parseInt(_.first(_.last(h).split("#")))}else g=parseInt(_.first(_.last(d.split("/")).split("#")));g&&f.updateProjectListProjectID(g)}var i=e.get(d);null!=i&&(p.preventCall.push("stateChange"),c.go(i.name,i.params,{location:!1}))}}function i(){var a=new Object;a.stateParams=new Object;var c=b.url();if("/"==c)a.name="select";else if("/project/"==c.substring(0,9)){if("edit/commentDetail"==c.substring(9,27)){var d=c.substring(28);a.name="project.edit.commentDetail",a.stateParams.commentID=parseInt(_.first(_.last(d.split("/")).split("#"))),a.stateParams.projectID=parseInt(_.first(d.split("/")))}else if("edit/dispositionDetail"==c.substring(9,31)){var d=c.substring(32).split("/");a.name="project.edit.dispositionDetail",a.stateParams.projectID=parseInt(d[0]),a.stateParams.disposedInFY=parseInt(d[1]),a.stateParams.disposedInQ=parseInt(_.first(_.last(d).split("#")))}else a.stateParams.projectID=parseInt(_.first(_.last(c.split("/")).split("#")))}return a}function j(a){if(null==p.preventCall.pop("stateChange")&&c.current.name){a=f.getMasterList().projectID;var d=""==c.params.projectID?{projectID:a}:c.params,g={name:c.current.name,params:d},h=k(d);e.set(h,g),p.preventCall.push("locationChange"),b.url(h)}}function k(a){var b=a.projectID,d="#"+p.guid().substr(0,8);return"project.detail"==c.current.name?"/project/"+b+d:"project."==c.current.name.substring(0,8)?0==f.getMasterList().allProjects.length?"/project/"+b+d:"project.edit.commentDetail"==c.current.name?"/"+c.current.name.replace(/\./g,"/")+"/"+b+"/"+a.commentID+d:"project.edit.dispositionDetail"==c.current.name?"/"+c.current.name.replace(/\./g,"/")+"/"+b+"/"+a.disposedInFY+"/"+a.disposedInQ+d:"/"+c.current.name.replace(/\./g,"/")+"/"+b+d:"/"+c.current.name.replace(/\./g,"/")}function l(){if(c.current.name){var a={name:c.current.name,params:c.params};sessionStorage.currentState=angular.toJson(a)}}function m(){if(c.current.name){var a={name:c.current.name,params:c.params},d=b.url();e.set(d,a)}}function n(){return""+p.s4()+p.s4()+"-"+p.s4()+"-"+p.s4()+"-"+p.s4()+"-"+p.s4()+p.s4()+p.s4()}function o(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}var p={preventCall:[],locationChange:h,getCurrentState:g,getStateFromLocation:i,saveState:m,stateChange:j,saveCurrentState:l,guid:n,s4:o};return window.onbeforeunload=function(b){a.$broadcast("savestate")},p}angular.module("app.stateLocation").factory("stateLocationService",a),a.$inject=["$rootScope","$location","$state","$stateParams","stateHistoryService","projectListService"]}(),function(){angular.module("app.title",["ui.router"])}(),function(){"use strict";function a(a,b,c){var d=this;this.masterList=c.getMasterList,this.pageTitle="PPT: Select",a.$on("$stateChangeSuccess",function(a,b){"select"==b.name.split(".")[0]?d.pageTitle="PPT: Select":"filter"==b.name.split(".")[0]?d.pageTitle="PPT: Filter Builder":"browse"==b.name.split(".")[0]?d.pageTitle="PPT: Browse":"project"==b.name.split(".")[0]?d.pageTitle=d.masterList().projectID+". "+d.masterList().projectName:"comment"==b.name.split(".")[0]?d.pageTitle="PPT: Comments":"curate"==b.name.split(".")[0]?d.pageTitle="PPT: Curate":"manage"==b.name.split(".")[0]?d.pageTitle="PPT: Manage":d.pageTitle="PPT: Select"})}angular.module("app.title").controller("Title",a),a.$inject=["$scope","$state","projectListService"]}();